<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panduan Guru</title>
<style>
body{margin:0;font-family:"Comic Sans MS",Arial,sans-serif;min-height:100vh;background:linear-gradient(#cfe9ff,#eaf6ff) bottom center no-repeat,url('tanah.png');background-size:cover,100% auto;overflow-x:hidden}
.cloud{position:absolute;top:40px;width:120px;z-index:1;opacity:.9}.cloud.left{left:40px}.cloud.right{right:40px}
.btn-back{position:fixed;top:20px;right:20px;padding:10px 20px;background:rgba(90,90,90,.85);border-radius:20px;text-decoration:none;color:#fff;font-weight:bold;backdrop-filter:blur(4px);z-index:10;transition:transform .15s ease,box-shadow .15s ease}.btn-back:hover{transform:scale(1.05)}.btn-back:active{transform:scale(1.1);box-shadow:0 6px 18px rgba(0,0,0,.3)}
.container{max-width:900px;margin:auto;padding:90px 30px 220px;position:relative;z-index:2}
.guide-section{display:flex;align-items:flex-start;gap:20px;margin-bottom:40px}
.character img{width:160px}
.bubble{background:#7bc8d6;color:#fff;padding:22px;border-radius:25px;max-width:560px;position:relative;box-shadow:0 4px 8px rgba(0,0,0,.15)}
.bubble::after{content:"";position:absolute;left:-20px;top:45px;border-top:15px solid transparent;border-bottom:15px solid transparent;border-right:20px solid #7bc8d6}
.bubble p{margin:0 0 12px;line-height:1.6;font-size:15px}
.pdf-section{background:#fff;padding:22px;border-radius:22px;box-shadow:0 4px 10px rgba(0,0,0,.12)}
.pdf-section h2{text-align:center;margin-bottom:18px}
iframe{border-radius:14px;border:none;background:#f4f6fb}
.btn-download{display:inline-block;margin-top:18px;padding:12px 26px;background:#4caf50;color:#fff;text-decoration:none;border-radius:25px;font-weight:bold}
</style>
</head>
<body>

<img src="awan.png" class="cloud left">
<img src="awan.png" class="cloud right">

<a href="dashboard-guru.html" class="btn-back">Kembali</a>

<div class="container">

<div class="guide-section">
<div class="character"><img src="dino.png"></div>
<div class="bubble" id="bubblePanduan"></div>
</div>

<div class="pdf-section">
<h2>Panduan Penggunaan</h2>
<iframe id="pdfPanduan" width="100%" height="520px"></iframe>
<center><a id="btnDownload" download class="btn-download">Download Panduan (PDF)</a></center>
</div>

</div>

<script>
const KEY_PDF="panduan_pdf";
const KEY_TAMBAHAN="panduan_tambahan";
const KEY_SOFT="panduan_pdf_softdelete";

const bubble=document.getElementById("bubblePanduan");
const pdfIframe=document.getElementById("pdfPanduan");
const btnDownload=document.getElementById("btnDownload");

// teks default
const teksDefault=[
  "Halo Bu/Pak Guru ðŸ‘‹",
  "Di halaman ini, Mimo bakal bantu menjelasin cara pakai aplikasi pembelajaran dengan mudah dan menyenangkan.",
  "Sebelum mulai belajar bareng siswa, yuk dibaca dulu panduannya supaya kegiatan di kelas bisa berjalan lancar âœ¨"
];

function renderBubble(){
  bubble.innerHTML="";
  teksDefault.forEach(t=>{const p=document.createElement("p");p.innerText=t; bubble.appendChild(p)});
  const tambahan=localStorage.getItem(KEY_TAMBAHAN);
  if(tambahan){const p=document.createElement("p");p.innerText=tambahan; bubble.appendChild(p);}
}

function renderPDF(){
  const pdf=localStorage.getItem(KEY_PDF) || "panduan-guru.pdf";
  const soft=localStorage.getItem(KEY_SOFT);
  if(soft==="true"){
    pdfIframe.style.display="none"; btnDownload.style.display="none";
  } else {
    pdfIframe.style.display="block"; btnDownload.style.display="inline-block";
    pdfIframe.src=pdf; btnDownload.href=pdf;
  }
}

// inisialisasi
renderBubble();
renderPDF();

// sinkron jika admin ubah localStorage
window.addEventListener('storage',()=>{
  renderBubble();
  renderPDF();
});
</script>

</body>
</html>