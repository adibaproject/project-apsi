<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Materi</title>

<link href="https://fonts.googleapis.com/css2?family=Rubik+Bubbles&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  background: linear-gradient(180deg,#CFE7FF 0%,#A7D3FF 40%,#87C3FF 100%);
  height:100vh;
  overflow:hidden;
  font-family:'Rubik Bubbles', cursive;
}

a{text-decoration:none !important;}

.back-btn{
  position:absolute;
  top:12px;
  right:14px;
  z-index:40;
  background:rgba(0,0,0,0.35);
  padding:8px 16px;
  border-radius:10px;
  color:white;
  font-size:14px;
  backdrop-filter:blur(3px);
  transition:.25s;
}
.back-btn:hover{
  background:rgba(0,0,0,0.55);
  transform:scale(1.05);
}

@keyframes cloudSlide {
  from { transform: translateX(0); }
  to { transform: translateX(-33%); }
}

.awan-container{
  position:fixed;
  bottom:-20px;
  width:260%;
  height:540px;
  left:0;
  display:flex;
  z-index:1;
  animation:cloudSlide 35s linear infinite;
  pointer-events:none;
}

.awan-container img{
  width:200%;
  height:160%;
  object-fit:contain;
  object-position:bottom;
  opacity:.95;
}

.dino-tengah{
  position:absolute;
  top:30%;
  left:50%;
  transform:translateX(-50%);
  width:400px;
  z-index:12;
}

.grid{
  position:absolute;
  top:58%;
  left:50%;
  transform:translate(-50%,-50%);
  width:82%;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  z-index:20;
}

.item{
  background:rgba(0,140,80,.35);
  height:70px;
  border-radius:18px;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:22px;
  backdrop-filter:blur(4px);
  transition:.25s;
}

.item:hover{
  transform:translateY(-6px);
  background:rgba(0,140,80,.55);
}

.sound-btn{
  position:fixed;
  left:16px;
  bottom:16px;
  width:60px;
  cursor:pointer;
  z-index:60;
  transition:.25s;
}
.sound-btn:hover{transform:scale(1.12);}

@media(max-width:420px){
  .item{font-size:17px;height:60px;}
  .grid{width:90%;gap:12px;}
  .dino-tengah{width:210px;}
  .sound-btn{width:48px;}
  .awan-container{height:320px;}
}
</style>
</head>

<body>

<a href="dashboard-guru.html" class="back-btn">Kembali</a>

<!-- AWAN -->
<div class="awan-container">
  <img src="awan.png"><img src="awan.png"><img src="awan.png">
  <img src="awan.png"><img src="awan.png"><img src="awan.png">
</div>

<!-- DINO -->
<img src="dino-tengah.png" class="dino-tengah">

<!-- GRID MATERI (DINAMIS) -->
<div class="grid" id="materiGrid"></div>

<!-- SOUND BUTTON POJOK KIRI BAWAH -->
<img src="sound.png" class="sound-btn" onclick="playSound()">

<!-- AUDIO UMUM -->
<audio id="soundPlayer" src="suaramateri.mp3"></audio>

<script>
/* ========= INIT DATA DEFAULT (KALAU BELUM ADA) ========= */
const defaultMateri = [
  {judul:'Petualangan Huruf', suara:'huruf.mp3', link:'petualangan-huruf.html'},
  {judul:'Kata-kata Ajaib', suara:'kataajaib.mp3', link:'kata-kata-ajaib.html'},
  {judul:'Kartu Kata Pintar', suara:'kartupintar.mp3', link:'kartu-kata-pintar.html'},
  {judul:'Tebak Gambar Seru', suara:'tebak.mp3', link:'tebak-gambar-seru.html'}
];

if(!localStorage.getItem('materiData')){
  const initData = defaultMateri.map(d => ({...d, aktif:true}));
  localStorage.setItem('materiData', JSON.stringify(initData));
}

/* ========= RENDER MATERI ========= */
const grid = document.getElementById('materiGrid');

function renderMateri(){
  grid.innerHTML = '';
  const data = JSON.parse(localStorage.getItem('materiData')) || [];
  const aktifData = data.filter(m => m.aktif !== false); // hanya yang aktif

  aktifData.forEach(m=>{
    const a = document.createElement('a');
    a.href = m.link;
    a.className = 'item';
    a.innerText = m.judul;

    a.onmouseover = () => playMateriSound(m.suara);
    a.onclick     = () => playMateriSound(m.suara);

    grid.appendChild(a);
  });
}

renderMateri();

/* ========= AUDIO ========= */
let hoverAudio = new Audio();

function playSound(){
  const a=document.getElementById("soundPlayer");
  a.currentTime=0;
  a.play();
}

function playMateriSound(src){
  hoverAudio.pause();
  hoverAudio = new Audio(src);
  hoverAudio.currentTime = 0;
  hoverAudio.play();
}
</script>

</body>
</html>